{"ast":null,"code":"import _toConsumableArray from\"G:/Github Local Repositries path/video_library_react_js/FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"G:/Github Local Repositries path/video_library_react_js/FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"G:/Github Local Repositries path/video_library_react_js/FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"G:/Github Local Repositries path/video_library_react_js/FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{Toast}from\"../Utils/Toast\";import ReactPlayer from'react-player';import{getData,postData}from\"../Utils/fetchApi\";import{useParams,Link}from'react-router-dom';import{useHistory}from'../Context/HistoryContext';import{usePlaylist}from'../Context/PlaylistContext';import{arr}from\"../Utils/dataArray\";import{faThumbsUp,faThumbsDown,faClock,faPlusSquare,faCheck}from'@fortawesome/free-solid-svg-icons';import{font}from'../Utils/FontAwesome';import Model from'../Component/ModelPopup';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function WatchVideo(){var _useParams=useParams(),videoId=_useParams.videoId;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),watchlater=_useState2[0],setwatchlater=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),result=_useState4[0],setresult=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),recommend=_useState6[0],setrecommend=_useState6[1];var _useHistory=useHistory(),itemInhistoy=_useHistory.itemInhistoy,setIteminhistory=_useHistory.setIteminhistory;var _usePlaylist=usePlaylist(),modal=_usePlaylist.modal,setmodal=_usePlaylist.setmodal;var userId=localStorage.getItem('userId');function AddHandler(){return _AddHandler.apply(this,arguments);}// function Removehandler(){\n//   // setwatchlater(!watchlater);\n// }\nfunction _AddHandler(){_AddHandler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var body,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:body={videostreamid:result.videoid,userId:userId,title:result.title,url:result.url,releaseDate:result.releaseDate};_context.prev=1;_context.next=4;return postData(body,'/watchlater');case 4:response=_context.sent;if(!(response['success']===true)){_context.next=10;break;}setwatchlater(!watchlater);return _context.abrupt(\"return\",toast.success(response.message));case 10:return _context.abrupt(\"return\",toast.error(response.message));case 11:_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);console.error(\"Error in AuhtContext \",_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return _AddHandler.apply(this,arguments);}useEffect(function(){getAllVideos();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);function getAllVideos(){return _getAllVideos.apply(this,arguments);}function _getAllVideos(){_getAllVideos=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return getData(\"/videos/\".concat(videoId));case 3:response=_context2.sent;setresult(response.video);setrecommend(response.video.recommmend);// Add this data to history context\nsetIteminhistory([].concat(_toConsumableArray(itemInhistoy),[response.video]));_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return _getAllVideos.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"WatchVideoPage\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left-section\",children:[/*#__PURE__*/_jsx(ReactPlayer,{playing:true,url:\"https://youtu.be/\".concat(videoId),controls:true,height:\"413px\",width:\"729px\"}),/*#__PURE__*/_jsx(\"small\",{style:{color:\"rgb(54,139,188)\"},children:result.hashtag}),/*#__PURE__*/_jsx(\"h2\",{children:result.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-bar\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"span\",{style:{display:'inline'},children:[/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsxs(\"b\",{children:[result.views,\" views\"]})}),/*#__PURE__*/_jsx(\"small\",{children:\" \\u2022 \"}),/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsx(\"b\",{children:result.releaseDate})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"actions\",children:[/*#__PURE__*/_jsx(\"span\",{children:font(faThumbsUp)}),/*#__PURE__*/_jsx(\"span\",{children:font(faThumbsDown)}),watchlater?/*#__PURE__*/_jsx(\"span\",{children:font(faCheck)}):/*#__PURE__*/_jsx(\"span\",{onClick:AddHandler,children:font(faClock)}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return setmodal(!modal);},children:font(faPlusSquare)})]})]})]}),modal?/*#__PURE__*/_jsx(Model,{}):/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"right-section\",children:[recommend.map(function(item){return/*#__PURE__*/_jsxs(\"div\",{class:\"chip\",children:[\" \",item,\" \"]});}),/*#__PURE__*/_jsxs(\"div\",{className:\"history-left-watch\",children:[/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"left\"}}),arr.map(function(item){return/*#__PURE__*/_jsx(Link,{to:\"/watch/\".concat(item.videoid),children:/*#__PURE__*/_jsxs(\"div\",{className:\"history-card-watch\",children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(ReactPlayer,{url:\"\".concat(item.url),width:\"150px\",height:\"100px\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"history-detail-watch\",children:item.title})]},item.id)});})]})]}),/*#__PURE__*/_jsx(\"div\",{children:Toast()})]});}","map":{"version":3,"sources":["G:/Github Local Repositries path/video_library_react_js/FrontEnd/src/Component/WatchVideo.js"],"names":["useEffect","useState","toast","Toast","ReactPlayer","getData","postData","useParams","Link","useHistory","usePlaylist","arr","faThumbsUp","faThumbsDown","faClock","faPlusSquare","faCheck","font","Model","WatchVideo","videoId","watchlater","setwatchlater","result","setresult","recommend","setrecommend","itemInhistoy","setIteminhistory","modal","setmodal","userId","localStorage","getItem","AddHandler","body","videostreamid","videoid","title","url","releaseDate","response","success","message","error","console","getAllVideos","video","recommmend","color","hashtag","display","views","map","item","textAlign","id"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { Toast } from \"../Utils/Toast\";\r\nimport ReactPlayer from 'react-player';\r\nimport { getData,postData} from \"../Utils/fetchApi\";\r\nimport { useParams,Link } from 'react-router-dom';\r\nimport { useHistory } from '../Context/HistoryContext';\r\nimport { usePlaylist } from '../Context/PlaylistContext';\r\nimport { arr } from \"../Utils/dataArray\";\r\nimport { faThumbsUp,faThumbsDown, faClock,faPlusSquare,faCheck } from '@fortawesome/free-solid-svg-icons'\r\nimport { font } from '../Utils/FontAwesome';\r\nimport  Model  from '../Component/ModelPopup'\r\n\r\nexport default function WatchVideo(){\r\n    let { videoId } = useParams();\r\n    const [watchlater,setwatchlater] = useState(false);\r\n    const [result,setresult] = useState([]);\r\n    const [recommend,setrecommend] = useState([]);\r\n    const {itemInhistoy,setIteminhistory,} = useHistory();\r\n    let {modal,setmodal} = usePlaylist();\r\n    const userId = localStorage.getItem('userId');\r\n\r\n\r\n    \r\n\r\n    async function AddHandler(){\r\n      const body = {\r\n        videostreamid: result.videoid,\r\n        userId:userId,\r\n        title: result.title,\r\n        url: result.url,\r\n        releaseDate: result.releaseDate\r\n      };\r\n      try{\r\n        let response = await postData(body,'/watchlater');\r\n        if(response['success'] === true){\r\n         setwatchlater(!watchlater);\r\n         return toast.success(response.message);\r\n      }\r\n      else{\r\n          return toast.error(response.message);\r\n      }\r\n    }catch(e){\r\n        console.error(\"Error in AuhtContext \" , e);\r\n      }\r\n        }\r\n    // function Removehandler(){\r\n    //   // setwatchlater(!watchlater);\r\n    // }\r\n\r\n    \r\n    useEffect(()=>{\r\n      getAllVideos();\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n        },[]);\r\n\r\n\r\n  async function getAllVideos(){\r\n      try{\r\n          let response  = await getData(`/videos/${videoId}`);\r\n          setresult(response.video);\r\n          setrecommend(response.video.recommmend)\r\n          // Add this data to history context\r\n          setIteminhistory([...itemInhistoy,response.video]);\r\n      }catch(e){\r\n          console.error(e);\r\n      }\r\n  }\r\n    \r\n    \r\n    return(\r\n            <div className=\"WatchVideoPage\">\r\n\r\n              \r\n           <div className=\"left-section\">\r\n           <ReactPlayer playing={true} url={`https://youtu.be/${videoId}`} controls={true} height=\"413px\" width=\"729px\"/>\r\n            <small style={{color:\"rgb(54,139,188)\"}}>{result.hashtag}</small>\r\n            <h2>{result.title}</h2>\r\n\r\n           <div className=\"info-bar\">\r\n              \r\n           <div>\r\n                    <span style={{display:'inline'}}>\r\n                    <small><b>{result.views} views</b></small>\r\n                    <small> • </small>\r\n                    <small><b>{result.releaseDate}</b></small>\r\n                    </span>\r\n        \r\n                   </div>\r\n\r\n                   <div className=\"actions\"> \r\n                   <span>{font(faThumbsUp)}</span>\r\n                   <span>{font(faThumbsDown)}</span>\r\n                   { watchlater ?  <span>{font(faCheck)}</span> : <span onClick={AddHandler}>{font(faClock)}</span> }\r\n                   <span onClick={()=>setmodal(!modal)} >{font(faPlusSquare)}</span>\r\n        \r\n                   </div>\r\n        \r\n           </div>\r\n           </div>\r\n           \r\n           \r\n           { modal ? <Model/> :<div></div>}\r\n\r\n\r\n\r\n\r\n\r\n         <div className=\"right-section\">\r\n\r\n\r\n         {recommend.map(function(item){ return (\r\n       <div class=\"chip\"> {item} </div>\r\n         ); })}\r\n  \r\n  \r\n  \r\n  \r\n         <div className=\"history-left-watch\">\r\n\r\n             <div style={{textAlign:\"left\"}}>\r\n          </div>{\r\n\r\n\r\n           arr.map(function(item){\r\n                return(\r\n                  <Link to={`/watch/${ item.videoid}`} >\r\n                     <div key={item.id} className=\"history-card-watch\">\r\n                     <span>\r\n                     <ReactPlayer url={`${item.url}`} width=\"150px\" height=\"100px\"/>\r\n                     </span>\r\n                     <div className=\"history-detail-watch\">\r\n                     {item.title}\r\n                     </div>\r\n                    \r\n                     </div>\r\n                     </Link>\r\n                );\r\n                \r\n                \r\n                })}</div>\r\n         </div>\r\n    \r\n    <div>\r\n   {Toast()}\r\n    </div>\r\n    \r\n    \r\n    \r\n            </div>\r\n        \r\n    \r\n        \r\n\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}