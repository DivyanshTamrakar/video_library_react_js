{"ast":null,"code":"import _regeneratorRuntime from\"G:/Github Local Repositries path/video_library_react_js/FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"G:/Github Local Repositries path/video_library_react_js/FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"G:/Github Local Repositries path/video_library_react_js/FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import ReactPlayer from'react-player';import{getData,postData}from\"../Utils/fetchApi\";import{useParams,Link}from'react-router-dom';import{useHistory}from'../Context/HistoryContext';import{arr}from\"../Utils/dataArray\";import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faThumbsUp,faThumbsDown,faClock,faPlusSquare,faCheck}from'@fortawesome/free-solid-svg-icons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function WatchVideo(){var _useParams=useParams(),videoId=_useParams.videoId;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),watchlater=_useState2[0],setwatchlater=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),result=_useState4[0],setresult=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),recommend=_useState6[0],setrecommend=_useState6[1];var _useHistory=useHistory(),itemInhistoy=_useHistory.itemInhistoy,setIteminhistory=_useHistory.setIteminhistory;var userId=localStorage.getItem('userId');function AddHandler(){return _AddHandler.apply(this,arguments);}function _AddHandler(){_AddHandler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var body,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:body={videostreamid:result.videoid,videoid:result._id,userId:userId,title:result.title,url:result.url,releaseDate:result.releaseDate};console.log(body);_context.prev=2;_context.next=5;return postData(body,'/watchlater');case 5:response=_context.sent;console.log(response);if(!(response['success']===true)){_context.next=12;break;}setwatchlater(!watchlater);return _context.abrupt(\"return\",toast.success(response.message));case 12:return _context.abrupt(\"return\",toast.error(response.message));case 13:_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](2);console.error(\"Error in AuhtContext \",_context.t0);case 18:case\"end\":return _context.stop();}}},_callee,null,[[2,15]]);}));return _AddHandler.apply(this,arguments);}function Removehandler(){// setwatchlater(!watchlater);\n}useEffect(function(){getAllVideos();},[]);function getAllVideos(){return _getAllVideos.apply(this,arguments);}// // Add this data to history context\n// useEffect(()=>{\n//   setIteminhistory([...itemInhistoy,result]);\n//   console.log(itemInhistoy.length);\n// },[]);\nfunction _getAllVideos(){_getAllVideos=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return getData(\"/videos/\".concat(videoId));case 3:response=_context2.sent;setresult(response.video);setrecommend(response.video.recommmend);_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return _getAllVideos.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"WatchVideoPage\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left-section\",children:[/*#__PURE__*/_jsx(ReactPlayer,{playing:true,url:\"https://youtu.be/\".concat(videoId),controls:true,height:\"413px\",width:\"729px\"}),/*#__PURE__*/_jsx(\"small\",{style:{color:\"rgb(54,139,188)\"},children:result.hashtag}),/*#__PURE__*/_jsx(\"h2\",{children:result.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-bar\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"span\",{style:{display:'inline'},children:[/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsxs(\"b\",{children:[result.views,\" views\"]})}),/*#__PURE__*/_jsx(\"small\",{children:\" \\u2022 \"}),/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsx(\"b\",{children:result.releaseDate})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"actions\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{className:\"cursor\",icon:faThumbsUp,size:\"lg\",color:\"black\"}),/*#__PURE__*/_jsx(FontAwesomeIcon,{className:\"cursor\",icon:faThumbsDown,size:\"lg\",color:\"black\"}),watchlater?/*#__PURE__*/_jsx(FontAwesomeIcon,{className:\"cursor\",icon:faCheck,size:\"lg\",color:'black'}):/*#__PURE__*/_jsx(FontAwesomeIcon,{onClick:AddHandler,className:\"cursor\",icon:faClock,size:\"lg\",color:'black'}),/*#__PURE__*/_jsx(FontAwesomeIcon,{className:\"cursor\",icon:faPlusSquare,size:\"lg\",color:\"black\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"right-section\",children:[recommend.map(function(item){return/*#__PURE__*/_jsxs(\"div\",{class:\"chip\",children:[\" \",item,\" \"]});}),/*#__PURE__*/_jsxs(\"div\",{className:\"history-left-watch\",children:[/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"left\"}}),arr.map(function(item){return/*#__PURE__*/_jsx(Link,{to:\"/watch/\".concat(item.videoid),children:/*#__PURE__*/_jsxs(\"div\",{className:\"history-card-watch\",children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(ReactPlayer,{url:\"\".concat(item.url),width:\"150px\",height:\"100px\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"history-detail-watch\",children:item.title})]},item.id)});})]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ToastContainer,{position:\"bottom-center\",autoClose:1000,hideProgressBar:true,newestOnTop:false,closeOnClick:true,rtl:false,pauseOnFocusLoss:true,draggable:true,pauseOnHover:true})})]});}","map":{"version":3,"sources":["G:/Github Local Repositries path/video_library_react_js/FrontEnd/src/Component/WatchVideo.js"],"names":["useEffect","useState","ToastContainer","toast","ReactPlayer","getData","postData","useParams","Link","useHistory","arr","FontAwesomeIcon","faThumbsUp","faThumbsDown","faClock","faPlusSquare","faCheck","WatchVideo","videoId","watchlater","setwatchlater","result","setresult","recommend","setrecommend","itemInhistoy","setIteminhistory","userId","localStorage","getItem","AddHandler","body","videostreamid","videoid","_id","title","url","releaseDate","console","log","response","success","message","error","Removehandler","getAllVideos","video","recommmend","color","hashtag","display","views","map","item","textAlign","id"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport ReactPlayer from 'react-player';\r\nimport { getData,postData} from \"../Utils/fetchApi\";\r\nimport { useParams,Link } from 'react-router-dom';\r\nimport { useHistory } from '../Context/HistoryContext';\r\nimport { arr } from \"../Utils/dataArray\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faThumbsUp,faThumbsDown, faClock,faPlusSquare,faCheck } from '@fortawesome/free-solid-svg-icons'\r\n\r\n\r\nexport default function WatchVideo(){\r\n    let { videoId } = useParams();\r\n    const [watchlater,setwatchlater] = useState(false);\r\n    const [result,setresult] = useState([]);\r\n    const [recommend,setrecommend] = useState([]);\r\n    const {itemInhistoy,setIteminhistory,} = useHistory();\r\n    const userId = localStorage.getItem('userId');\r\n\r\n\r\n    \r\n\r\n    async function AddHandler(){\r\n      const body = {\r\n        videostreamid: result.videoid,\r\n        videoid:result._id,\r\n        userId:userId,\r\n        title: result.title,\r\n        url: result.url,\r\n        releaseDate: result.releaseDate\r\n      };\r\n\r\n\r\n      console.log(body);\r\n      try{\r\n        let response = await postData(body,'/watchlater');\r\n        console.log(response);\r\n        if(response['success'] === true){\r\n         setwatchlater(!watchlater);\r\n         return toast.success(response.message);\r\n      }\r\n      else{\r\n          return toast.error(response.message);\r\n      }\r\n    }catch(e){\r\n        console.error(\"Error in AuhtContext \" , e);\r\n      }\r\n        }\r\n    function Removehandler(){\r\n      // setwatchlater(!watchlater);\r\n    }\r\n\r\n    \r\n    useEffect(()=>{\r\n      getAllVideos();\r\n      \r\n  },[]);\r\n\r\n\r\n  async function getAllVideos(){\r\n      try{\r\n          let response  = await getData(`/videos/${videoId}`);\r\n          setresult(response.video);\r\n          setrecommend(response.video.recommmend)\r\n\r\n      }catch(e){\r\n          console.error(e);\r\n      }\r\n  }\r\n    \r\n    // // Add this data to history context\r\n    // useEffect(()=>{\r\n    //   setIteminhistory([...itemInhistoy,result]);\r\n    //   console.log(itemInhistoy.length);\r\n    // },[]);\r\n  \r\n\r\n\r\n\r\n      \r\n\r\n\r\n\r\n\r\n    return(\r\n            <div className=\"WatchVideoPage\">\r\n           <div className=\"left-section\">\r\n           <ReactPlayer playing={true} url={`https://youtu.be/${videoId}`} controls={true} height=\"413px\" width=\"729px\"/>\r\n            <small style={{color:\"rgb(54,139,188)\"}}>{result.hashtag}</small>\r\n            <h2>{result.title}</h2>\r\n\r\n           <div className=\"info-bar\">\r\n              \r\n           <div>\r\n                    <span style={{display:'inline'}}>\r\n                    <small><b>{result.views} views</b></small>\r\n                    <small> â€¢ </small>\r\n                    <small><b>{result.releaseDate}</b></small>\r\n                    </span>\r\n        \r\n                   </div>\r\n\r\n                   <div className=\"actions\"> \r\n        \r\n                   <FontAwesomeIcon className='cursor' icon={faThumbsUp}  size='lg' color='black' />\r\n                   <FontAwesomeIcon className='cursor' icon={faThumbsDown}  size='lg' color='black' />\r\n                   {watchlater ? \r\n                   <FontAwesomeIcon className='cursor'  icon={faCheck}  size='lg' color= {'black'} />:\r\n                   <FontAwesomeIcon  onClick={AddHandler}  className='cursor'  icon={faClock}  size='lg' color= {'black'} />}\r\n                   <FontAwesomeIcon className='cursor' icon={faPlusSquare}  size='lg' color='black' />\r\n        \r\n                   </div>\r\n        \r\n           </div>\r\n\r\n\r\n           </div>\r\n\r\n         <div className=\"right-section\">\r\n\r\n\r\n         {recommend.map(function(item){ return (\r\n       <div class=\"chip\"> {item} </div>\r\n         ); })}\r\n  \r\n  \r\n  \r\n  \r\n         <div className=\"history-left-watch\">\r\n\r\n             <div style={{textAlign:\"left\"}}>\r\n          </div>{\r\n\r\n\r\n           arr.map(function(item){\r\n                return(\r\n                  <Link to={`/watch/${ item.videoid}`} >\r\n                     <div key={item.id} className=\"history-card-watch\">\r\n                     <span>\r\n                     <ReactPlayer url={`${item.url}`} width=\"150px\" height=\"100px\"/>\r\n                     </span>\r\n                     <div className=\"history-detail-watch\">\r\n                     {item.title}\r\n                     </div>\r\n                    \r\n                     </div>\r\n                     </Link>\r\n                );\r\n                \r\n                \r\n                })}</div>\r\n         </div>\r\n    \r\n    <div>\r\n    <ToastContainer\r\n    position=\"bottom-center\"\r\n    autoClose={1000}\r\n    hideProgressBar={true}\r\n    newestOnTop={false}\r\n    closeOnClick\r\n    rtl={false}\r\n    pauseOnFocusLoss\r\n    draggable\r\n    pauseOnHover\r\n    />\r\n    </div>\r\n    \r\n    \r\n    \r\n            </div>\r\n        \r\n    \r\n        \r\n\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}