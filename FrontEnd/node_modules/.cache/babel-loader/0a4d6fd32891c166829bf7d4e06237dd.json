{"ast":null,"code":"import _regeneratorRuntime from\"G:/Github Local Repositries path/video_library_react_js/FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"G:/Github Local Repositries path/video_library_react_js/FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"G:/Github Local Repositries path/video_library_react_js/FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import{createContext,useContext,useState}from\"react\";import{postData}from\"../Utils/fetchApi\";import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{jsx as _jsx}from\"react/jsx-runtime\";export var AuthContext=/*#__PURE__*/createContext();export function AuthProvieder(_ref){var children=_ref.children;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),login=_useState2[0],setlogin=_useState2[1];var userId=localStorage.getItem('userId');function check(){if(userId!==null){setlogin(true);}}function LoginWithCredential(_x,_x2){return _LoginWithCredential.apply(this,arguments);}function _LoginWithCredential(){_LoginWithCredential=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,password){var body,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:body={email:email,password:password};_context.prev=1;_context.next=4;return postData(body,'/users/signin');case 4:response=_context.sent;console.log(response);if(!(response['success']===true)){_context.next=13;break;}setlogin(true);localStorage.setItem('userId',response['user']['uid']);localStorage.setItem('name',response['user']['name']);toast.success(response.message);_context.next=14;break;case 13:return _context.abrupt(\"return\",toast.error(response.message));case 14:_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](1);console.error(\"Error in AuhtContext \",_context.t0);case 19:case\"end\":return _context.stop();}}},_callee,null,[[1,16]]);}));return _LoginWithCredential.apply(this,arguments);}return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{login:login,LoginWithCredential:LoginWithCredential,setlogin:setlogin,check:check},children:children});}export function useAuth(){return useContext(AuthContext);}","map":{"version":3,"sources":["G:/Github Local Repositries path/video_library_react_js/FrontEnd/src/Context/LoginContext.js"],"names":["axios","createContext","useContext","useState","postData","toast","AuthContext","AuthProvieder","children","login","setlogin","userId","localStorage","getItem","check","LoginWithCredential","email","password","body","response","console","log","setItem","success","message","error","useAuth"],"mappings":"kiBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,aAAT,CAAwBC,UAAxB,CAAoCC,QAApC,KAAoD,OAApD,CACA,OAASC,QAAT,KAAyB,mBAAzB,CACA,OAAUC,KAAV,KAAuB,gBAAvB,CACA,MAAO,uCAAP,C,2CAEA,MAAO,IAAMC,CAAAA,WAAW,cAAGL,aAAa,EAAjC,CAEP,MAAO,SAASM,CAAAA,aAAT,MAAkC,IAAVC,CAAAA,QAAU,MAAVA,QAAU,CAErC,cAAyBL,QAAQ,CAAC,KAAD,CAAjC,wCAAOM,KAAP,eAAaC,QAAb,eACA,GAAMC,CAAAA,MAAM,CAAIC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAhB,CAID,QAASC,CAAAA,KAAT,EAAgB,CACb,GAAGH,MAAM,GAAK,IAAd,CAAoB,CAClBD,QAAQ,CAAC,IAAD,CAAR,CACD,CACF,CAXoC,QActBK,CAAAA,mBAdsB,yKAcrC,iBAAmCC,KAAnC,CAA0CC,QAA1C,oIACUC,IADV,CACiB,CACZF,KAAK,CAAEA,KADK,CAEZC,QAAQ,CAAGA,QAFC,CADjB,uCAM0Bb,CAAAA,QAAQ,CAACc,IAAD,CAAM,eAAN,CANlC,QAMSC,QANT,eAOKC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EAPL,KAQQA,QAAQ,CAAC,SAAD,CAAR,GAAwB,IARhC,2BASMT,QAAQ,CAAC,IAAD,CAAR,CACAE,YAAY,CAACU,OAAb,CAAqB,QAArB,CAA8BH,QAAQ,CAAC,MAAD,CAAR,CAAiB,KAAjB,CAA9B,EACAP,YAAY,CAACU,OAAb,CAAqB,MAArB,CAA4BH,QAAQ,CAAC,MAAD,CAAR,CAAiB,MAAjB,CAA5B,EACAd,KAAK,CAACkB,OAAN,CAAcJ,QAAQ,CAACK,OAAvB,EAZN,+DAecnB,KAAK,CAACoB,KAAN,CAAYN,QAAQ,CAACK,OAArB,CAfd,2FAkBKJ,OAAO,CAACK,KAAR,CAAc,uBAAd,cAlBL,qEAdqC,sDAoCrC,mBACA,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAI,CAAChB,KAAK,CAALA,KAAD,CAAOM,mBAAmB,CAAnBA,mBAAP,CAA2BL,QAAQ,CAARA,QAA3B,CAAoCI,KAAK,CAALA,KAApC,CAA/B,UACKN,QADL,EADA,CAKH,CAID,MAAO,SAASkB,CAAAA,OAAT,EAAkB,CACtB,MAAOxB,CAAAA,UAAU,CAACI,WAAD,CAAjB,CACF","sourcesContent":["import axios from \"axios\";\r\nimport { createContext, useContext, useState } from \"react\";\r\nimport { postData } from \"../Utils/fetchApi\";\r\nimport {  toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport function AuthProvieder({children}){\r\n\r\n    const [login,setlogin] = useState(false);\r\n    const userId  = localStorage.getItem('userId');\r\n    \r\n    \r\n    \r\n   function check(){\r\n      if(userId !== null ){\r\n        setlogin(true);\r\n      }\r\n    }    \r\n   \r\n   \r\n    async function LoginWithCredential(email, password){\r\n        const body = {\r\n         email :email, \r\n         password : password,\r\n       }\r\n       try{\r\n         let response = await postData(body,'/users/signin');\r\n         console.log(response);\r\n         if(response['success'] === true){\r\n          setlogin(true);\r\n          localStorage.setItem('userId',response['user']['uid']);\r\n          localStorage.setItem('name',response['user']['name']);\r\n          toast.success(response.message);\r\n       }\r\n       else{\r\n           return toast.error(response.message);\r\n       }\r\n     }catch(e){\r\n         console.error(\"Error in AuhtContext \" , e);\r\n       }\r\n       }\r\n\r\n    return (\r\n    <AuthContext.Provider value = {{login,LoginWithCredential,setlogin,check}}>\r\n        {children}\r\n    </AuthContext.Provider>\r\n    );\r\n}\r\n\r\n\r\n\r\nexport function useAuth(){\r\n   return useContext(AuthContext);\r\n}\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}